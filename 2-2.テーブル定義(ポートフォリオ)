================================================================================================================================
create_table :admin do |t|
  t.string :login_id, null: false, default: ""
  t.string :email, null: false, default: ""
  t.string :encrypted_password, null: false, default: ""
end

create_table :user do |t|
  t.string :username, null: false
  t.string :nickname, null: false
  t.text :introduction
  t.boolean :is_active, null: false, default: true
end
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
has_one_attached :profile_image
has_many :relationships, dependent: :destroy
has_many :followings, through: :relationships, source: :followed
has_many :followers, through: :reverse_of_relationships, source: :follower
has_many :applicants, through: :applications, source: :applicant
has_many :offerers, through: :deals, source: :offerer
has_many :acceptors, through: :deals, source: :acceptor
has_many :offerers, through: :reviews, source: :offerer
has_many :acceptors, through: :reviews, source: :acceptor
has_many :visitors, class_name: "Notifications", foreign_key: :visitor_id
has_many :visiteds, class_name: "Notifications", foreign_key: :visited_id
has_many :offers
has_many :deals
has_many :locations, dependent: :destroy
has_many :favorites, dependent: :destroy
has_many :comments
has_many :chattings
has_many :notifications, dependent: :destroy

def follow(user_id)
  relationships.create(followed_id: user_id)
end

def unfollow(user_id)
  relationships.find_by(followed_id: user_id).destroy
end

def following?(user)
  followings.include?(user)
end

scope :newuser_today, -> { where(created_at: Time.current.at_beginning_of_day..Time.current.at_end_of_day) }

>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
create_table :relationship do |t|
  t.references :follower, null: false, foreign_key: { to_table: :users }
  t.references :followed, null: false, foreign_key: { to_table: :users }
end

create_table :location do |t|
  t.integer :user_id, null: false
  t.string :address, null: false
  t.float :latitude, null: false
  t.float :longitude, null: false
end

create_table :offer do |t|
  t.references :user, null: false, foreign_key: true
  t.string :title, null: false
  t.text :description, null: false
  t.datetime :work_date, null: false
  t.string :location, null: false
  t.integer :person, null: false
  t.string :requirement, null: false
  t.string :reward, null: false
  t.integer :offer_status, null: false
  t.boolean :is_deleted, null: false, default: false
end

create_table :favorite do |t|
  t.references :user, null: false, foreign_key: true
  t.references :offer, null: false, foreign_key: true
end

create_table :comment do |t|
  t.references :user, null: false, foreign_key: true
  t.references :offer, null: false, foreign_key: true
  t.text :comment, null: false
end

create_table :application do |t|
  t.references :user, null: false, foreign_key: true
  t.references :offer, null: false, foreign_key: true
  t.references :applicant, null: false, foreign_key: { to_table: :users }
  t.text :appeal, null: false
  t.integer :application_status, null: false
  t.boolean :is_deleted, null: false, default: false
end

create_table :deal do |t|
  t.references :offer, null: false, foreign_key: true
  t.references :user, null: false, foreign_key: true
  t.references :application, null: false, foreign_key: true
  t.references :applicant, null: false, foreign_key: { to_table: :users }
  t.datetime :work_date, null: false
  t.integer :deal_status, null: false
end

create_table :chatting do |t|
  t.references :deal, null: false, foreign_key: true
  t.references :user, null: false, foreign_key: true
  t.text :chat, null: false
end

create_table :review do |t|
  t.references :deal, null: false, foreign_key: true
  t.references :user, null: false, foreign_key: true
  t.references :applicant, null: false, foreign_key: { to_table: :users }
  t.text :review, null: false
  t.float :all_rating, null: false, default: 0
  t.float :rating1, null: false, default: 0
  t.float :rating2, null: false, default: 0
  t.float :rating3, null: false, default: 0
  t.float :rating4, null: false, default: 0
end

create_table :notification do |t|
  t.integer :visitor_id, null: false, foreign_key: true
  t.integer :visited_id, null: false, foreign_key: true
  t.integer :action_type, null: false
  t.boolean :checked, null: false, default: false
end

================================================================================================================================
